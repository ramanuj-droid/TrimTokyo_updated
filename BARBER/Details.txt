TrimTokyo/
â”‚
â”œâ”€â”€ backend/
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ authController.js
â”‚   â””â”€â”€ bookingController.js
â”‚   â”œâ”€â”€ adminController.js
â”‚   â””â”€â”€ BarberController.js
â”‚   â”œâ”€â”€ server.js
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ db.js
|   |   â””â”€â”€ seed.js
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ User.js
â”‚   â”‚   â”œâ”€â”€ Barber.js
â”‚   â”‚   â””â”€â”€ Booking.js
|   |   â””â”€â”€ Admin.js
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ authRoutes.js
â”‚   â”‚   â”œâ”€â”€ userRoutes.js
â”‚   â”‚   â”œâ”€â”€ barberRoutes.js
â”‚   â”‚   â”œâ”€â”€ adminRoutes.js
â”‚   â”‚   â””â”€â”€ bookingRoutes.js
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ authMiddleware.js
|   |   â””â”€â”€ errorHandler.js
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ mapAPI.js
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ login.html
â”‚   â”œâ”€â”€ register.html
â”‚   â”œâ”€â”€ dashboard_user.html
â”‚   â”œâ”€â”€ dashboard_barber.html
â”‚   â”œâ”€â”€ dashboard_admin.html
â”‚   â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ js/
â”‚   â””â”€â”€ media/
â”‚
â””â”€â”€ package.json


Notes and implementation details

Authentication:

JWT based. Tokens are returned at login/registration.
authMiddleware verifies token and attaches req.user.
auth accepts role(s) to restrict endpoints.

Password hashing:

Registration routes hash passwords.
Seed route uses plain-text passwords to keep seed simple. In production, modify seed to hash passwords or use the provided helpers/hashSeedPasswords.js.
jeftler integration:
utils/mapAPI.js provides geocodeAddress and getDirections functions using the Google Maps HTTP API.



COD:

Bookings default to paymentMethod: 'COD' and paymentStatus: 'pending'.
PaymentStatus can be updated by barber or admin via the booking update endpoints.
Dummy Data:
Admin-only /api/admin/seed clears collections and inserts simple dummy users, barbers, and bookings for frontend testing.

Security:

For a production-ready app, add rate-limiting, input validation (e.g., celebrate/Joi), password reset flows, email verification,
logging retention, and proper seeding with hashed passwords.



Sure â€” hereâ€™s the backend user flow for each role in short:
ğŸ‘¤ User Flow:
A user registers or logs in through authRoutes. Once authenticated, they can browse available barbers and create a booking via bookingRoutes.
 Each booking stores details like barber, service, payment, and location.
 The user can later view booking status (Pending, Accepted, Completed) and details fetched from the backend.
ğŸ’ˆ Barber Flow:
A barber logs in via authRoutes and can update their current location (for live tracking) and manage bookings through bookingRoutes.
 They can change booking status (e.g., Accept, In Progress, Completed) and keep their availability updated.
ğŸ› ï¸ Admin Flow:
An admin logs in through adminRoutes and has full control.
 They can view all users, barbers, and bookings, update booking statuses, manage accounts (approve/reject barbers), and perform analytics or data seeding through seed.js.
In short:
User â†’ books service â†’ Barber â†’ updates status/location â†’ Admin â†’ oversees everything and ensures smooth operation.